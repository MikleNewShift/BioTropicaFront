import React, { Dispatch, SetStateAction, useEffect, useState } from "react";
import { Link } from "react-router-dom";
import { setSourceMapRange } from "typescript";

import s from "./HeaderMobile.module.scss";

interface Props {
  burger: boolean;
  setBurger: Dispatch<SetStateAction<boolean>>;
  page: string;
  setPage: Dispatch<SetStateAction<string>>;
}

export const HeaderMobile = ({ burger, setBurger, page, setPage }: Props) => {
  function showBurger() {
    setBurger(!burger);
  }

  const pages = [
    {
      name: "Пользователи",
      link: "/",
      icon: (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M7.63105 17.3093V14.7537C7.63104 14.1037 8.16097 13.5755 8.81755 13.5712H11.2226C11.8823 13.5712 12.4171 14.1006 12.4171 14.7537V14.7537V17.3173C12.417 17.8692 12.8619 18.3202 13.4192 18.3332H15.0226C16.621 18.3332 17.9167 17.0504 17.9167 15.468V15.468V8.19803C17.9082 7.57553 17.6129 6.99096 17.115 6.6107L11.6315 2.23759C10.6708 1.47614 9.30521 1.47614 8.34456 2.23759L2.88506 6.61863C2.38526 6.99736 2.08953 7.58289 2.08337 8.20597V15.468C2.08337 17.0504 3.3791 18.3332 4.97747 18.3332H6.58084C7.152 18.3332 7.61502 17.8748 7.61502 17.3093V17.3093"
            stroke="#1E174D"
            strokeWidth="1.5"
            strokeLinecap="round"
            strokeLinejoin="round"
          />
        </svg>
      ),
    },
    {
      name: "Видеоконсультации",
      link: "/video",
      icon: (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M13.1801 13.0169C13.1801 14.6777 12.0485 15.8511 10.2385 15.8511H5.05762C3.24929 15.8511 2.12512 14.6777 2.12512 13.0169V7.21691C2.12512 5.55691 3.24929 4.37524 5.06679 4.37524H10.2385C12.0485 4.37524 13.1801 5.55691 13.1801 7.21691V13.0169Z"
            stroke="#1E174D"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            d="M13.1801 9.39709L16.5943 6.60209C17.1359 6.15625 17.9584 6.54375 17.9584 7.24959V12.9763C17.9584 13.6829 17.1359 14.0688 16.5943 13.6238L13.1801 10.8288"
            stroke="#1E174D"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      ),
    },
    {
      name: "Сообщения",
      link: "/",
      icon: (
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M12.058 2.0002C8.54635 1.98609 5.28554 3.80697 3.46059 6.80006C1.63541 9.79355 1.51288 13.5226 3.13765 16.6291L3.32147 16.9875C3.39175 17.1192 3.40531 17.2613 3.36458 17.3926C3.10204 18.0864 2.87136 18.8357 2.6873 19.5969L2.66776 19.7609C2.66776 20.5263 3.07616 21.0522 3.88671 21.0342L4.02167 21.018C4.75798 20.8554 5.4831 20.6459 6.19261 20.3908C6.28665 20.3671 6.4407 20.3763 6.57971 20.4332L7.26224 20.8194C7.26378 20.8242 7.26493 20.8277 7.27208 20.8319L7.31788 20.8479C10.9929 22.7803 15.4812 22.2472 18.5997 19.5078C21.7187 16.7681 22.8199 12.3901 21.3675 8.50383C19.9153 4.61799 16.2115 2.03073 12.058 2.0002ZM11.7675 3.39899L12.0484 3.39459C15.6231 3.42178 18.8109 5.64858 20.0605 8.99231C21.31 12.3357 20.3626 16.1021 17.6788 18.4595L17.4587 18.6466C14.8626 20.778 11.2582 21.2076 8.23269 19.7467L7.94496 19.6025L7.95729 19.6042L7.93909 19.5992L7.51677 19.3569C7.36471 19.2709 7.24408 19.2058 7.14685 19.159C6.6837 18.9681 6.21354 18.9399 5.77133 19.0617L5.35272 19.2055C5.07605 19.2968 4.80372 19.3794 4.53273 19.4541L4.13767 19.5573L4.04356 19.9249C4.21419 19.2192 4.42804 18.5246 4.68389 17.8451C4.84853 17.3182 4.79818 16.7905 4.55755 16.3402L4.37662 15.9873C2.97627 13.3098 3.08168 10.1019 4.65196 7.52645C6.17338 5.03117 8.85494 3.48232 11.7675 3.39899ZM6.4746 12.0002C6.4746 11.37 6.98586 10.8595 7.61596 10.8595C8.24606 10.8595 8.75732 11.37 8.75732 12.0002C8.75732 12.6304 8.24606 13.1408 7.61596 13.1408C6.98586 13.1408 6.4746 12.6304 6.4746 12.0002ZM10.9115 12.0002C10.9115 11.37 11.4227 10.8595 12.0528 10.8595C12.6829 10.8595 13.1942 11.37 13.1942 12.0002C13.1942 12.6304 12.6829 13.1408 12.0528 13.1408C11.4227 13.1408 10.9115 12.6304 10.9115 12.0002ZM16.4897 10.8595C15.8596 10.8595 15.3484 11.37 15.3484 12.0002C15.3484 12.6304 15.8596 13.1408 16.4897 13.1408C17.1198 13.1408 17.6311 12.6304 17.6311 12.0002C17.6311 11.37 17.1198 10.8595 16.4897 10.8595Z"
            fill="#1E174D"
          />
        </svg>
      ),
      counter: 5,
    },
    {
      name: "Уведомления",
      link: "/",
      icon: (
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M12.0361 2H11.9648C8.59565 2 5.50654 4.44456 5.20685 7.68096C5.18686 7.91248 5.17324 8.14906 5.16444 8.40391L5.15213 8.99974L5.14969 9.53395L5.16473 9.47306C5.02569 10.151 4.70525 10.7799 4.23653 11.2938L4.16936 11.3802C3.76804 11.9898 3.53744 12.6955 3.50175 13.4242L3.5009 13.6624C3.48041 14.6208 3.80882 15.5691 4.42663 16.3223C5.26444 17.2069 6.34896 17.7346 7.51296 17.8466C10.49 18.1699 13.502 18.1699 16.4873 17.8457C17.6434 17.7393 18.7311 17.2101 19.5338 16.3582C20.1399 15.6331 20.4707 14.763 20.499 13.862L20.5 13.4587C20.4668 12.698 20.2348 11.9917 19.8286 11.3847L19.7669 11.3055L19.6162 11.1282C19.2776 10.7052 19.0303 10.218 18.8896 9.69688L18.845 9.50977L18.8358 9.31353C18.833 9.22527 18.8317 9.1274 18.8312 9.00516L18.8311 8.33206C18.8288 8.07458 18.8212 7.89148 18.8034 7.68536C18.4934 4.44285 15.4034 2 12.0361 2ZM11.9648 3.39535H12.0361C14.7336 3.39535 17.1944 5.34075 17.4307 7.81326C17.4447 7.97558 17.4509 8.13044 17.4528 8.3605L17.4555 9.26514C17.4585 9.40982 17.4642 9.53013 17.4739 9.66551L17.4868 9.75818L17.5517 10.034C17.744 10.7635 18.0893 11.4441 18.5647 12.0309L18.7026 12.1926L18.6873 12.1672C18.951 12.5613 19.1013 13.0186 19.1223 13.4901L19.1216 13.6536C19.1375 14.3097 18.9199 14.933 18.5084 15.4267C17.9645 16.002 17.1871 16.3802 16.3514 16.4572C13.4527 16.7719 10.5393 16.7719 7.65168 16.4583C6.80682 16.377 6.02881 15.9985 5.45369 15.3931C5.08086 14.9356 4.86568 14.3142 4.87919 13.6774L4.87935 13.4587L4.89682 13.2682C4.9389 12.9495 5.04539 12.6265 5.21045 12.3291L5.29415 12.1905C5.90779 11.5004 6.32892 10.6611 6.51441 9.75667L6.52879 9.61486L6.53532 8.69559L6.55137 8.2292C6.55866 8.08207 6.56798 7.94228 6.57967 7.80678C6.80804 5.34087 9.26651 3.39535 11.9648 3.39535ZM5.29415 12.1905C5.27931 12.2072 5.26436 12.2238 5.24929 12.2404L5.29856 12.1833L5.29415 12.1905ZM14.608 19.6906C14.3114 19.4491 13.8775 19.4967 13.6389 19.7969C13.5355 19.927 13.4158 20.0437 13.2826 20.1443C12.8307 20.4986 12.2669 20.6564 11.7064 20.5896C11.1467 20.523 10.6379 20.2381 10.2927 19.7995C10.0555 19.4981 9.62189 19.4484 9.32417 19.6885C9.02646 19.9286 8.9774 20.3676 9.21459 20.6689C9.787 21.3962 10.6258 21.8659 11.5453 21.9754C12.464 22.0849 13.3891 21.826 14.1167 21.255C14.3327 21.0922 14.5366 20.8935 14.7129 20.6715C14.9515 20.3713 14.9045 19.9321 14.608 19.6906Z"
            fill="#1E174D"
          />
        </svg>
      ),
      counter: 15,
    },
    {
      name: "Выход",
      link: "/profile",
      icon: (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M7.5 17.5H4.16667C3.72464 17.5 3.30072 17.3244 2.98816 17.0118C2.67559 16.6993 2.5 16.2754 2.5 15.8333V4.16667C2.5 3.72464 2.67559 3.30072 2.98816 2.98816C3.30072 2.67559 3.72464 2.5 4.16667 2.5H7.5"
            stroke="#1E174D"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
          />
          <path
            d="M13.3334 14.1663L17.5 9.99967L13.3334 5.83301"
            stroke="#1E174D"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
          />
          <path
            d="M17.5 10H7.5"
            stroke="#1E174D"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
          />
        </svg>
      ),
    },
  ];

  return (
    <>
      <div
        className={s.header}
        style={burger ? { backgroundColor: "#fff" } : {}}
      >
        <div className={s.wrapper}>
          <div className={s.pageTitle}>
            <p>{page}</p>
          </div>
          <nav className={s.burger} onClick={showBurger}>
            <div className={`${s.burgerIcon} ${burger ? s.burgerActive : ""}`}>
              <div className={s.topStick}></div>
              <div className={s.middleStick}></div>
              <div className={s.bottomStick}></div>
            </div>
          </nav>
        </div>
      </div>
      <div className={`${s.burgerMenu} ${burger ? s.burgerActive : ""}`}>
        <div className={s.container}>
          <Link
            to="/profile"
            onClick={() => {
              setPage("Профиль");
            }}
            className={s.userInfo}
          >
            <div className={s.photo}>
              <img
                src="https://images.unsplash.com/photo-1608731294828-d4023daac5ca?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=700&q=80"
                alt=""
              />
            </div>
            <div className={s.name}>
              <p>Василий Пупкин</p>
            </div>
          </Link>

          <nav className={s.burgerNav}>
            {pages.map((page) => (
              <Link
                onClick={() => {
                  setPage(page.name);
                }}
                className={s.link}
                to={page.link}
              >
                <div className={s.icon}>{page.icon}</div>
                <p>{page.name}</p>
                {page.counter && (
                  <div className={s.counter}>
                    <p>{page.counter}</p>
                  </div>
                )}
              </Link>
            ))}
          </nav>
        </div>
      </div>
    </>
  );
};
